<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Chat - AI Luật</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
  <link href="../css/style.css" rel="stylesheet">
  <link href="../css/animations.css" rel="stylesheet">
  <style>
  /* Cải thiện giao diện chat */
  .chat-body {
    background-color: #f9f9f9;
    border-radius: 10px;
    padding: 15px;
  }

  .message {
    position: relative;
    max-width: 70%;
    padding: 10px 15px;
    border-radius: 15px;
    margin-bottom: 10px;
    animation: fadeIn 0.3s ease-in-out;
  }

  .user-message {
    background-color: #007bff;
    color: white;
    margin-left: auto;
  }

  .ai-message {
    background-color: #e9ecef;
    color: #333;
  }

  .message .timestamp {
    display: block;
    text-align: right;
    font-size: 0.8rem;
    color: #888;
    margin-top: 5px;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .dark-mode {
    background-color: #121212;
    color: #ffffff;
  }

  .dark-mode .chat-body {
    background-color: #1e1e1e;
  }

  .dark-mode .user-message {
    background-color: #0d6efd;
  }

  .dark-mode .ai-message {
    background-color: #333333;
    color: #ffffff;
  }
  </style>
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
    <div class="container">
      <a class="navbar-brand" href="../index.html">
        <img src="../img/Law.png" alt="Logo">
        <span>Pháp Luật Số</span>
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto align-items-lg-center">
          <li class="nav-item"><a class="nav-link" href="../index.html">Trang chủ</a></li>
          <li class="nav-item"><a class="nav-link" href="chat.html">Chat AI</a></li>
          <li class="nav-item"><a class="nav-link" href="quiz.html">Quiz</a></li>
          <li class="nav-item"><a class="nav-link" href="profile.html">Hồ sơ</a></li>
          <li class="nav-item"><a class="nav-link" href="my-quizzes.html">Bộ đề</a></li>
          <li class="nav-item"><a class="nav-link" href="guide.html">Hướng dẫn</a></li>
          <li class="nav-item"><a class="nav-link" href="stats.html">Thống kê</a></li>
          <li class="nav-item"><a class="nav-link" href="contact.html">Liên hệ</a></li>
          <li class="nav-item"><a class="nav-link active" href="about.html">Về chúng tôi</a></li>
          <li class="nav-item"><a class="nav-link" href="admin.html">Quản trị</a></li>
          <li class="nav-item ms-lg-3"><a class="btn btn-outline-primary btn-sm px-3" href="login.html"><i class="bi bi-box-arrow-in-right me-1"></i>Đăng Nhập</a></li>
          <li class="nav-item ms-lg-2"><a class="btn btn-primary btn-sm px-3" href="register.html"><i class="bi bi-person-plus me-1"></i>Đăng Ký</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <main class="chat-page pt-5 mt-4">
    <div class="container-fluid">
      <div class="row gx-0">
        <!-- Sidebar -->
        <aside class="col-lg-3 col-md-4 chat-sidebar bg-light p-3 border-end">
          <div class="d-flex align-items-center mb-3">
            <img src="../img/Law.png" alt="AI Luật" style="height:40px; width:auto; border-radius:8px;" class="me-2">
            <div>
              <div class="fw-bold">AI Luật</div>
              <div class="small text-muted">Trợ lý pháp lý thông minh</div>
            </div>
          </div>

          <div class="mb-3">
            <button class="btn btn-primary w-100" id="new-chat-btn"><i class="bi bi-plus-lg me-2"></i>Cuộc trò chuyện mới</button>
          </div>

          <div class="recent-list">
            <h6 class="text-muted small">Gần đây</h6>
            <ul class="list-unstyled mt-2" id="conversations">
              <li class="py-2 conversation-item active" data-id="1"><a href="#" class="text-decoration-none text-dark">Trò chuyện mẫu</a></li>
            </ul>
          </div>

          <div class="mt-4 small text-muted">Tổng đài hỗ trợ: <span class="text-primary">0938 36 1919</span></div>
        </aside>

        <!-- Chat column -->
        <section class="col-lg-9 col-md-8 chat-column d-flex flex-column p-0">
          <div class="chat-header border-bottom p-3 d-flex align-items-center">
            <div class="me-3">
              <img src="../img/Law.png" alt="avatar" style="height:44px; width:44px; border-radius:8px;" />
            </div>
            <div>
              <div class="fw-bold">AI Luật</div>
              <div class="small text-muted">Sẵn sàng trả lời các câu hỏi pháp lý của bạn</div>
            </div>
            <div class="ms-auto small text-muted">Thứ Tư, 15 tháng 10, 2025</div>
          </div>

          <div class="chat-body flex-grow-1 overflow-auto p-4" id="chat-body">
            <div class="system-note mb-3 text-muted small">AI Luật đang được cải thiện liên tục — kiểm tra thông tin quan trọng trước khi tin dùng.</div>

            <div class="message-row ai mb-3">
              <div class="message ai-message p-3 rounded-3 shadow-sm">
                Xin chào! Tôi có thể giúp gì cho bạn hôm nay?
              </div>
            </div>

          </div>

          <div class="chat-composer border-top p-3">
            <form id="chat-form" class="d-flex gap-2 align-items-center">
              <button type="button" id="mic-btn" class="btn btn-light rounded-circle"><i class="bi bi-mic-fill"></i></button>
              <input id="chat-input" type="text" class="form-control rounded-pill" placeholder="Nhập thắc mắc của bạn tại đây..." aria-label="Nhập tin nhắn">
              <button type="submit" class="btn btn-primary rounded-circle" style="width:48px; height:48px;"><i class="bi bi-send-fill"></i></button>
            </form>
          </div>
        </section>
      </div>
    </div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="../scripts/script.js"></script>
  <script>
  document.addEventListener('DOMContentLoaded', () => {
    const form = document.getElementById('chat-form');
    const input = document.getElementById('chat-input');
    const body = document.getElementById('chat-body');
    const toggleDarkMode = document.createElement('button');

    toggleDarkMode.textContent = 'Chế độ tối';
    toggleDarkMode.className = 'btn btn-secondary btn-sm';
    toggleDarkMode.style.position = 'absolute';
    toggleDarkMode.style.top = '10px';
    toggleDarkMode.style.right = '10px';
    document.body.appendChild(toggleDarkMode);

    toggleDarkMode.addEventListener('click', () => {
      document.body.classList.toggle('dark-mode');
      toggleDarkMode.textContent = document.body.classList.contains('dark-mode') ? 'Chế độ sáng' : 'Chế độ tối';
    });

    function appendMessage(text, who = 'user') {
      const row = document.createElement('div');
      row.className = 'message-row ' + (who === 'user' ? 'user' : 'ai');

      const bubble = document.createElement('div');
      bubble.className = 'message ' + (who === 'user' ? 'user-message' : 'ai-message');
      bubble.textContent = text;

      const timestamp = document.createElement('div');
      timestamp.className = 'timestamp';
      timestamp.textContent = new Date().toLocaleTimeString();

      bubble.appendChild(timestamp);
      row.appendChild(bubble);
      body.appendChild(row);
      body.scrollTop = body.scrollHeight;
    }

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      const val = input.value.trim();
      if (!val) return;
      appendMessage(val, 'user');
      input.value = '';

      setTimeout(() => {
        appendMessage('Đang tổng hợp câu trả lời... Vui lòng chờ.', 'ai');
      }, 400);

      setTimeout(() => {
        appendMessage('Đây là câu trả lời mẫu dựa trên dữ liệu pháp luật. Vui lòng kiểm tra thông tin chính thức.', 'ai');
      }, 1400);
    });
  });
  </script>
</body>
</html>